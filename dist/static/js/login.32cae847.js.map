{"version":3,"file":"static/js/login.32cae847.js","mappings":"oLACA,MAAMA,EAAa,CAAC,OACb,SAASC,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,OAAO,WAAc,QAAoB,MAAO,KAAM,EAAC,IAAAC,GAAoB,MAAO,CAChFC,QAASN,EAAO,KAAOA,EAAO,GAAK,IAAIO,IAASH,EAASI,QAAUJ,EAASI,UAAUD,KACrF,OAAO,IAAAF,GAAoB,MAAO,KAAM,EAAC,IAAAA,GAAoB,MAAO,CACrEI,IAAKN,EAAMO,WACV,KAAM,EAAGb,MACd,C,wBCNA,GACEc,OACE,MAAO,CACLD,UAAW,GACXE,aAAc,KACdC,OAAQ,GACRC,gBAAiB,KAErB,EACAC,QAAS,CACPP,OAAQQ,iBACN,MAAMC,EAAYC,KAAKC,MACvB,IAAIC,QAAa,QAAQH,GACrBI,QAAe,QAAUD,GAC7BE,KAAKZ,UAAYW,EAAOV,KAAKA,KAAKY,MAClCD,KAAKT,OAASO,EAAKT,KAAKA,KAAKE,MAC/B,EACAW,aAAcR,iBACZM,KAAKG,cACLH,KAAKR,gBAAkBY,aAAYV,UACjCW,QAAQC,IAAI,GACZ,IACE,IAAIC,EAAOX,KAAKC,MAChB,MAAMW,QAAiB,QAAYR,KAAKT,OAAQgB,GAIhD,GAH2B,MAAvBC,EAASnB,KAAKS,MAChBW,MAAM,QAEmB,MAAvBD,EAASnB,KAAKS,KAAc,CAC9BE,KAAKG,cACLM,MAAM,QACNJ,QAAQC,IAAIE,GACZH,QAAQC,IAAIE,EAASnB,KAAKqB,QAC1B,MAAMC,EAAU,CAAC,EACXC,EAAcJ,EAASnB,KAAKqB,OAAOG,MAAM,KAC/CD,EAAYE,SAAQC,IAClB,MAAMC,EAAcD,EAAKE,OACnBC,EAAaF,EAAYG,QAAQ,KACjCC,EAAMJ,EAAYK,UAAU,EAAGH,GAC/BI,EAAQN,EAAYK,UAAUH,EAAa,GACjDP,EAAQS,GAAOE,EACf,QAAYF,EAAKE,EAAM,IAEzBjB,QAAQC,IAAIK,GAEZN,QAAQC,IAAI,WAIZN,KAAKuB,QAAQC,IAAI,EACnB,CACF,CAAE,MAAOC,GACPpB,QAAQoB,MAAMA,EAChB,IACC,IACL,EACAtB,cACEuB,cAAc1B,KAAKR,gBACrB,GAEFmC,MAAO,CACLpC,SACES,KAAKE,cACP,I,UC3DJ,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASpD,KAEpE,O","sources":["webpack://wangyiyun-app/./src/views/Login.vue?88d5","webpack://wangyiyun-app/./src/views/Login.vue","webpack://wangyiyun-app/./src/views/Login.vue?18aa"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.QRCode && $options.QRCode(...args))\n  }, \"登录\"), _createElementVNode(\"div\", null, [_createElementVNode(\"img\", {\n    src: $data.QRcodeImg\n  }, null, 8, _hoisted_1)])]);\n}","import { getQRCode, getCode, getQRresult } from \"@/request/api/home.js\";\nimport Cookies from \"js-cookie\";\nexport default {\n  data() {\n    return {\n      QRcodeImg: \"\",\n      qrCodeResult: null,\n      unikey: \"\",\n      pollingInterval: null\n    };\n  },\n  methods: {\n    QRCode: async function () {\n      const timeStamp = Date.now();\n      let code = await getCode(timeStamp);\n      let result = await getQRCode(code);\n      this.QRcodeImg = result.data.data.qrimg;\n      this.unikey = code.data.data.unikey;\n    },\n    startPolling: async function () {\n      this.stopPolling();\n      this.pollingInterval = setInterval(async () => {\n        console.log(1);\n        try {\n          let time = Date.now();\n          const response = await getQRresult(this.unikey, time);\n          if (response.data.code === 802) {\n            alert(\"等待确认\");\n          }\n          if (response.data.code === 803) {\n            this.stopPolling();\n            alert(\"登录成功\");\n            console.log(response);\n            console.log(response.data.cookie);\n            const cookies = {};\n            const cookiePairs = response.data.cookie.split(\";\");\n            cookiePairs.forEach(pair => {\n              const trimmedPair = pair.trim();\n              const splitIndex = trimmedPair.indexOf(\"=\");\n              const key = trimmedPair.substring(0, splitIndex);\n              const value = trimmedPair.substring(splitIndex + 1);\n              cookies[key] = value;\n              Cookies.set(key, value);\n            });\n            console.log(cookies);\n            // Cookies.set('user', cookies.MUSIC_U);\n            console.log(Cookies.get());\n            // console.log(Cookies.get(\"user\"));\n            // console.log(JSON.parse(Cookies.get(\"user\")));\n\n            this.$router.go(-1);\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }, 6000);\n    },\n    stopPolling() {\n      clearInterval(this.pollingInterval);\n    }\n  },\n  watch: {\n    unikey() {\n      this.startPolling();\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./Login.vue?vue&type=template&id=22e4fe30\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\java项目\\\\网易云音乐\\\\wangyiyun-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","render","_ctx","_cache","$props","$setup","$data","$options","_","onClick","args","QRCode","src","QRcodeImg","data","qrCodeResult","unikey","pollingInterval","methods","async","timeStamp","Date","now","code","result","this","qrimg","startPolling","stopPolling","setInterval","console","log","time","response","alert","cookie","cookies","cookiePairs","split","forEach","pair","trimmedPair","trim","splitIndex","indexOf","key","substring","value","$router","go","error","clearInterval","watch","__exports__"],"sourceRoot":""}