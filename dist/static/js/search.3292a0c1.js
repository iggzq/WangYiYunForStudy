"use strict";(self["webpackChunkwangyiyun_app"]=self["webpackChunkwangyiyun_app"]||[]).push([[464],{2142:function(e,s,i){i.r(s),i.d(s,{default:function(){return I}});var t=i(9812),a=i(4220),n=i(5893);const l=e=>((0,t.dD)("data-v-1a083735"),e=e(),(0,t.Cn)(),e),r={class:"main"},o={class:"searchTop"},c=l((()=>(0,t._)("use",{"xlink:href":"#icon-fanhui"},null,-1))),y=[c],d={class:"searchHistory"},u=l((()=>(0,t._)("span",{class:"searchSpan"},"历史",-1))),h=["onClick"],g=l((()=>(0,t._)("use",{"xlink:href":"#icon-duoxuan"},null,-1))),k=[g],p={class:"itemList"},L=["onClick"],w={class:"leftSpan"},f={class:"itemRight"},v={key:0,class:"icon bofang","aria-hidden":"true"},_=l((()=>(0,t._)("use",{"xlink:href":"#icon-a-24gl-playSquare"},null,-1))),m=[_],K=l((()=>(0,t._)("svg",{class:"icon liebiao","aria-hidden":"true"},[(0,t._)("use",{"xlink:href":"#icon-a-31liebiao"})],-1)));function W(e,s,i,l,c,g){return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",o,[((0,t.wg)(),(0,t.iD)("svg",{class:"icon","aria-hidden":"true",onClick:s[0]||(s[0]=s=>e.$router.go(-1))},y)),(0,t.wy)((0,t._)("input",{type:"text",placeholder:"张杰","onUpdate:modelValue":s[1]||(s[1]=e=>c.searchKey=e),onKeyup:s[2]||(s[2]=(0,a.D2)(((...e)=>g.enterKey&&g.enterKey(...e)),["enter"]))},null,544),[[a.nr,c.searchKey]])]),(0,t._)("div",d,[u,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c.keyWordList,(e=>((0,t.wg)(),(0,t.iD)("span",{key:e,class:"spanKey",onClick:s=>g.searchByHistory(e)},(0,n.zw)(e),9,h)))),128)),((0,t.wg)(),(0,t.iD)("svg",{class:"icon","aria-hidden":"true",onClick:s[3]||(s[3]=(...e)=>g.clearSearchHistory&&g.clearSearchHistory(...e))},k))]),(0,t._)("div",p,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c.songList,((e,s)=>((0,t.wg)(),(0,t.iD)("div",{class:"item",key:s},[(0,t._)("div",{class:"itemLeft",onClick:s=>g.playMusic(e)},[(0,t._)("span",w,(0,n.zw)(s+1),1),(0,t._)("div",null,[(0,t._)("p",null,(0,n.zw)(e.name),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.ar,((e,s)=>((0,t.wg)(),(0,t.iD)("span",{key:s},(0,n.zw)(e.name),1)))),128))])],8,L),(0,t._)("div",f,[0!=e.mv?((0,t.wg)(),(0,t.iD)("svg",v,m)):(0,t.kq)("",!0),K])])))),128))])])}i(541);var S=i(5263),D=i(2357),C={data(){return{keyWordList:[],searchKey:"",songList:[]}},mounted(){null!==localStorage.getItem("keyWordList")&&(this.keyWordList=JSON.parse(localStorage.getItem("keyWordList")))},methods:{enterKey:async function(){if(""!==this.searchKey){this.keyWordList.unshift(this.searchKey),this.keyWordList=[...new Set(this.keyWordList)],this.keyWordList.length>10&&this.keyWordList.splice(this.keyWordList.length-1,1),localStorage.setItem("keyWordList",JSON.stringify(this.keyWordList));let e=await(0,S.s)(this.searchKey);this.songList=e.data.result.songs,this.searchKey=""}},clearSearchHistory:function(){this.keyWordList=[],localStorage.removeItem("keyWordList")},searchByHistory:async function(e){let s=await(0,S.s)(e);this.songList=s.data.result.songs},playMusic:function(e){this.updatePlayList(e),console.log(e),this.updatePlayListIndex(this.$store.state.playList.length-1)},...(0,D.OI)(["updatePlayList","updatePlayListIndex"])}},H=i(8998);const x=(0,H.Z)(C,[["render",W],["__scopeId","data-v-1a083735"]]);var I=x}}]);
//# sourceMappingURL=search.3292a0c1.js.map