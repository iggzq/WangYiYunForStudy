"use strict";(self["webpackChunkwangyiyun_app"]=self["webpackChunkwangyiyun_app"]||[]).push([[535],{8528:function(t,n,o){o.r(n),o.d(n,{default:function(){return d}});var e=o(9812);const l=["src"];function a(t,n,o,a,i,s){return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("div",{onClick:n[0]||(n[0]=(...t)=>s.QRCode&&s.QRCode(...t))},"登录"),(0,e._)("div",null,[(0,e._)("img",{src:i.QRcodeImg},null,8,l)])])}var i=o(5263),s=o(9526),c={data(){return{QRcodeImg:"",qrCodeResult:null,unikey:"",pollingInterval:null}},methods:{QRCode:async function(){const t=Date.now();let n=await(0,i.Cq)(t),o=await(0,i.Fj)(n);this.QRcodeImg=o.data.data.qrimg,this.unikey=n.data.data.unikey},startPolling:async function(){this.stopPolling(),this.pollingInterval=setInterval((async()=>{console.log(1);try{let t=Date.now();const n=await(0,i.X7)(this.unikey,t);if(802===n.data.code&&alert("等待确认"),803===n.data.code){this.stopPolling(),alert("登录成功"),console.log(n),console.log(n.data.cookie);const t={},o=n.data.cookie.split(";");o.forEach((n=>{const o=n.trim(),e=o.indexOf("="),l=o.substring(0,e),a=o.substring(e+1);t[l]=a,s.Z.set(l,a)})),console.log(t),console.log(s.Z.get()),this.$router.go(-1)}}catch(t){console.error(t)}}),6e3)},stopPolling(){clearInterval(this.pollingInterval)}},watch:{unikey(){this.startPolling()}}},r=o(8998);const u=(0,r.Z)(c,[["render",a]]);var d=u}}]);
//# sourceMappingURL=login.32cae847.js.map