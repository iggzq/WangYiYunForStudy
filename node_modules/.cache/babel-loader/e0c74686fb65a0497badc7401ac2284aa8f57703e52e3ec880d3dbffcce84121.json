{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { ref, watch, onMounted, defineComponent } from \"vue\";\nimport { useEventListener } from \"@vant/use\";\nimport { makeNumericProp, makeStringProp, createNamespace } from \"../utils/index.mjs\";\nconst [name, bem] = createNamespace(\"text-ellipsis\");\nconst textEllipsisProps = {\n  rows: makeNumericProp(1),\n  content: makeStringProp(\"\"),\n  expandText: makeStringProp(\"\"),\n  collapseText: makeStringProp(\"\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: textEllipsisProps,\n  emits: [\"clickAction\"],\n  setup(props, {\n    emit\n  }) {\n    const text = ref(\"\");\n    const expanded = ref(false);\n    const hasAction = ref(false);\n    const root = ref();\n    const pxToNum = value => {\n      if (!value) return 0;\n      const match = value.match(/^\\d*(\\.\\d*)?/);\n      return match ? Number(match[0]) : 0;\n    };\n    const calcEllipsised = () => {\n      const cloneContainer = () => {\n        if (!root.value) return;\n        const originStyle = window.getComputedStyle(root.value);\n        const container2 = document.createElement(\"div\");\n        const styleNames = Array.prototype.slice.apply(originStyle);\n        styleNames.forEach(name2 => {\n          container2.style.setProperty(name2, originStyle.getPropertyValue(name2));\n        });\n        container2.style.position = \"fixed\";\n        container2.style.zIndex = \"-9999\";\n        container2.style.top = \"-9999px\";\n        container2.style.height = \"auto\";\n        container2.style.minHeight = \"auto\";\n        container2.style.maxHeight = \"auto\";\n        container2.innerText = props.content;\n        document.body.appendChild(container2);\n        return container2;\n      };\n      const calcEllipsisText = (container2, maxHeight2) => {\n        const {\n          content,\n          expandText\n        } = props;\n        const dot = \"...\";\n        let left = 0;\n        let right = content.length;\n        let res = -1;\n        while (left <= right) {\n          const mid = Math.floor((left + right) / 2);\n          container2.innerText = content.slice(0, mid) + dot + expandText;\n          if (container2.offsetHeight <= maxHeight2) {\n            left = mid + 1;\n            res = mid;\n          } else {\n            right = mid - 1;\n          }\n        }\n        return content.slice(0, res) + dot;\n      };\n      const container = cloneContainer();\n      if (!container) return;\n      const {\n        paddingBottom,\n        paddingTop,\n        lineHeight\n      } = container.style;\n      const maxHeight = (Number(props.rows) + 0.5) * pxToNum(lineHeight) + pxToNum(paddingTop) + pxToNum(paddingBottom);\n      if (maxHeight < container.offsetHeight) {\n        hasAction.value = true;\n        text.value = calcEllipsisText(container, maxHeight);\n      } else {\n        hasAction.value = false;\n        text.value = props.content;\n      }\n      document.body.removeChild(container);\n    };\n    const onClickAction = event => {\n      expanded.value = !expanded.value;\n      emit(\"clickAction\", event);\n    };\n    const renderAction = () => _createVNode(\"span\", {\n      \"class\": bem(\"action\"),\n      \"onClick\": onClickAction\n    }, [expanded.value ? props.collapseText : props.expandText]);\n    onMounted(calcEllipsised);\n    watch(() => [props.content, props.rows], calcEllipsised);\n    useEventListener(\"resize\", calcEllipsised);\n    return () => _createVNode(\"div\", {\n      \"ref\": root,\n      \"class\": bem()\n    }, [expanded.value ? props.content : text.value, hasAction.value ? renderAction() : null]);\n  }\n});\nexport { stdin_default as default, textEllipsisProps };","map":{"version":3,"names":["createVNode","_createVNode","ref","watch","onMounted","defineComponent","useEventListener","makeNumericProp","makeStringProp","createNamespace","name","bem","textEllipsisProps","rows","content","expandText","collapseText","stdin_default","props","emits","setup","emit","text","expanded","hasAction","root","pxToNum","value","match","Number","calcEllipsised","cloneContainer","originStyle","window","getComputedStyle","container2","document","createElement","styleNames","Array","prototype","slice","apply","forEach","name2","style","setProperty","getPropertyValue","position","zIndex","top","height","minHeight","maxHeight","innerText","body","appendChild","calcEllipsisText","maxHeight2","dot","left","right","length","res","mid","Math","floor","offsetHeight","container","paddingBottom","paddingTop","lineHeight","removeChild","onClickAction","event","renderAction","default"],"sources":["D:/java项目/网易云音乐/node_modules/vant/es/text-ellipsis/TextEllipsis.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { ref, watch, onMounted, defineComponent } from \"vue\";\nimport { useEventListener } from \"@vant/use\";\nimport { makeNumericProp, makeStringProp, createNamespace } from \"../utils/index.mjs\";\nconst [name, bem] = createNamespace(\"text-ellipsis\");\nconst textEllipsisProps = {\n  rows: makeNumericProp(1),\n  content: makeStringProp(\"\"),\n  expandText: makeStringProp(\"\"),\n  collapseText: makeStringProp(\"\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: textEllipsisProps,\n  emits: [\"clickAction\"],\n  setup(props, {\n    emit\n  }) {\n    const text = ref(\"\");\n    const expanded = ref(false);\n    const hasAction = ref(false);\n    const root = ref();\n    const pxToNum = (value) => {\n      if (!value)\n        return 0;\n      const match = value.match(/^\\d*(\\.\\d*)?/);\n      return match ? Number(match[0]) : 0;\n    };\n    const calcEllipsised = () => {\n      const cloneContainer = () => {\n        if (!root.value)\n          return;\n        const originStyle = window.getComputedStyle(root.value);\n        const container2 = document.createElement(\"div\");\n        const styleNames = Array.prototype.slice.apply(originStyle);\n        styleNames.forEach((name2) => {\n          container2.style.setProperty(name2, originStyle.getPropertyValue(name2));\n        });\n        container2.style.position = \"fixed\";\n        container2.style.zIndex = \"-9999\";\n        container2.style.top = \"-9999px\";\n        container2.style.height = \"auto\";\n        container2.style.minHeight = \"auto\";\n        container2.style.maxHeight = \"auto\";\n        container2.innerText = props.content;\n        document.body.appendChild(container2);\n        return container2;\n      };\n      const calcEllipsisText = (container2, maxHeight2) => {\n        const {\n          content,\n          expandText\n        } = props;\n        const dot = \"...\";\n        let left = 0;\n        let right = content.length;\n        let res = -1;\n        while (left <= right) {\n          const mid = Math.floor((left + right) / 2);\n          container2.innerText = content.slice(0, mid) + dot + expandText;\n          if (container2.offsetHeight <= maxHeight2) {\n            left = mid + 1;\n            res = mid;\n          } else {\n            right = mid - 1;\n          }\n        }\n        return content.slice(0, res) + dot;\n      };\n      const container = cloneContainer();\n      if (!container)\n        return;\n      const {\n        paddingBottom,\n        paddingTop,\n        lineHeight\n      } = container.style;\n      const maxHeight = (Number(props.rows) + 0.5) * pxToNum(lineHeight) + pxToNum(paddingTop) + pxToNum(paddingBottom);\n      if (maxHeight < container.offsetHeight) {\n        hasAction.value = true;\n        text.value = calcEllipsisText(container, maxHeight);\n      } else {\n        hasAction.value = false;\n        text.value = props.content;\n      }\n      document.body.removeChild(container);\n    };\n    const onClickAction = (event) => {\n      expanded.value = !expanded.value;\n      emit(\"clickAction\", event);\n    };\n    const renderAction = () => _createVNode(\"span\", {\n      \"class\": bem(\"action\"),\n      \"onClick\": onClickAction\n    }, [expanded.value ? props.collapseText : props.expandText]);\n    onMounted(calcEllipsised);\n    watch(() => [props.content, props.rows], calcEllipsised);\n    useEventListener(\"resize\", calcEllipsised);\n    return () => _createVNode(\"div\", {\n      \"ref\": root,\n      \"class\": bem()\n    }, [expanded.value ? props.content : text.value, hasAction.value ? renderAction() : null]);\n  }\n});\nexport {\n  stdin_default as default,\n  textEllipsisProps\n};\n"],"mappings":"AAAA,SAASA,WAAW,IAAIC,YAAY,QAAQ,KAAK;AACjD,SAASC,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAEC,eAAe,QAAQ,KAAK;AAC5D,SAASC,gBAAgB,QAAQ,WAAW;AAC5C,SAASC,eAAe,EAAEC,cAAc,EAAEC,eAAe,QAAQ,oBAAoB;AACrF,MAAM,CAACC,IAAI,EAAEC,GAAG,CAAC,GAAGF,eAAe,CAAC,eAAe,CAAC;AACpD,MAAMG,iBAAiB,GAAG;EACxBC,IAAI,EAAEN,eAAe,CAAC,CAAC,CAAC;EACxBO,OAAO,EAAEN,cAAc,CAAC,EAAE,CAAC;EAC3BO,UAAU,EAAEP,cAAc,CAAC,EAAE,CAAC;EAC9BQ,YAAY,EAAER,cAAc,CAAC,EAAE;AACjC,CAAC;AACD,IAAIS,aAAa,GAAGZ,eAAe,CAAC;EAClCK,IAAI;EACJQ,KAAK,EAAEN,iBAAiB;EACxBO,KAAK,EAAE,CAAC,aAAa,CAAC;EACtBC,KAAKA,CAACF,KAAK,EAAE;IACXG;EACF,CAAC,EAAE;IACD,MAAMC,IAAI,GAAGpB,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMqB,QAAQ,GAAGrB,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAMsB,SAAS,GAAGtB,GAAG,CAAC,KAAK,CAAC;IAC5B,MAAMuB,IAAI,GAAGvB,GAAG,EAAE;IAClB,MAAMwB,OAAO,GAAIC,KAAK,IAAK;MACzB,IAAI,CAACA,KAAK,EACR,OAAO,CAAC;MACV,MAAMC,KAAK,GAAGD,KAAK,CAACC,KAAK,CAAC,cAAc,CAAC;MACzC,OAAOA,KAAK,GAAGC,MAAM,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;IACrC,CAAC;IACD,MAAME,cAAc,GAAGA,CAAA,KAAM;MAC3B,MAAMC,cAAc,GAAGA,CAAA,KAAM;QAC3B,IAAI,CAACN,IAAI,CAACE,KAAK,EACb;QACF,MAAMK,WAAW,GAAGC,MAAM,CAACC,gBAAgB,CAACT,IAAI,CAACE,KAAK,CAAC;QACvD,MAAMQ,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QAChD,MAAMC,UAAU,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,KAAK,CAACV,WAAW,CAAC;QAC3DM,UAAU,CAACK,OAAO,CAAEC,KAAK,IAAK;UAC5BT,UAAU,CAACU,KAAK,CAACC,WAAW,CAACF,KAAK,EAAEZ,WAAW,CAACe,gBAAgB,CAACH,KAAK,CAAC,CAAC;QAC1E,CAAC,CAAC;QACFT,UAAU,CAACU,KAAK,CAACG,QAAQ,GAAG,OAAO;QACnCb,UAAU,CAACU,KAAK,CAACI,MAAM,GAAG,OAAO;QACjCd,UAAU,CAACU,KAAK,CAACK,GAAG,GAAG,SAAS;QAChCf,UAAU,CAACU,KAAK,CAACM,MAAM,GAAG,MAAM;QAChChB,UAAU,CAACU,KAAK,CAACO,SAAS,GAAG,MAAM;QACnCjB,UAAU,CAACU,KAAK,CAACQ,SAAS,GAAG,MAAM;QACnClB,UAAU,CAACmB,SAAS,GAAGpC,KAAK,CAACJ,OAAO;QACpCsB,QAAQ,CAACmB,IAAI,CAACC,WAAW,CAACrB,UAAU,CAAC;QACrC,OAAOA,UAAU;MACnB,CAAC;MACD,MAAMsB,gBAAgB,GAAGA,CAACtB,UAAU,EAAEuB,UAAU,KAAK;QACnD,MAAM;UACJ5C,OAAO;UACPC;QACF,CAAC,GAAGG,KAAK;QACT,MAAMyC,GAAG,GAAG,KAAK;QACjB,IAAIC,IAAI,GAAG,CAAC;QACZ,IAAIC,KAAK,GAAG/C,OAAO,CAACgD,MAAM;QAC1B,IAAIC,GAAG,GAAG,CAAC,CAAC;QACZ,OAAOH,IAAI,IAAIC,KAAK,EAAE;UACpB,MAAMG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAAC,CAACN,IAAI,GAAGC,KAAK,IAAI,CAAC,CAAC;UAC1C1B,UAAU,CAACmB,SAAS,GAAGxC,OAAO,CAAC2B,KAAK,CAAC,CAAC,EAAEuB,GAAG,CAAC,GAAGL,GAAG,GAAG5C,UAAU;UAC/D,IAAIoB,UAAU,CAACgC,YAAY,IAAIT,UAAU,EAAE;YACzCE,IAAI,GAAGI,GAAG,GAAG,CAAC;YACdD,GAAG,GAAGC,GAAG;UACX,CAAC,MAAM;YACLH,KAAK,GAAGG,GAAG,GAAG,CAAC;UACjB;QACF;QACA,OAAOlD,OAAO,CAAC2B,KAAK,CAAC,CAAC,EAAEsB,GAAG,CAAC,GAAGJ,GAAG;MACpC,CAAC;MACD,MAAMS,SAAS,GAAGrC,cAAc,EAAE;MAClC,IAAI,CAACqC,SAAS,EACZ;MACF,MAAM;QACJC,aAAa;QACbC,UAAU;QACVC;MACF,CAAC,GAAGH,SAAS,CAACvB,KAAK;MACnB,MAAMQ,SAAS,GAAG,CAACxB,MAAM,CAACX,KAAK,CAACL,IAAI,CAAC,GAAG,GAAG,IAAIa,OAAO,CAAC6C,UAAU,CAAC,GAAG7C,OAAO,CAAC4C,UAAU,CAAC,GAAG5C,OAAO,CAAC2C,aAAa,CAAC;MACjH,IAAIhB,SAAS,GAAGe,SAAS,CAACD,YAAY,EAAE;QACtC3C,SAAS,CAACG,KAAK,GAAG,IAAI;QACtBL,IAAI,CAACK,KAAK,GAAG8B,gBAAgB,CAACW,SAAS,EAAEf,SAAS,CAAC;MACrD,CAAC,MAAM;QACL7B,SAAS,CAACG,KAAK,GAAG,KAAK;QACvBL,IAAI,CAACK,KAAK,GAAGT,KAAK,CAACJ,OAAO;MAC5B;MACAsB,QAAQ,CAACmB,IAAI,CAACiB,WAAW,CAACJ,SAAS,CAAC;IACtC,CAAC;IACD,MAAMK,aAAa,GAAIC,KAAK,IAAK;MAC/BnD,QAAQ,CAACI,KAAK,GAAG,CAACJ,QAAQ,CAACI,KAAK;MAChCN,IAAI,CAAC,aAAa,EAAEqD,KAAK,CAAC;IAC5B,CAAC;IACD,MAAMC,YAAY,GAAGA,CAAA,KAAM1E,YAAY,CAAC,MAAM,EAAE;MAC9C,OAAO,EAAEU,GAAG,CAAC,QAAQ,CAAC;MACtB,SAAS,EAAE8D;IACb,CAAC,EAAE,CAAClD,QAAQ,CAACI,KAAK,GAAGT,KAAK,CAACF,YAAY,GAAGE,KAAK,CAACH,UAAU,CAAC,CAAC;IAC5DX,SAAS,CAAC0B,cAAc,CAAC;IACzB3B,KAAK,CAAC,MAAM,CAACe,KAAK,CAACJ,OAAO,EAAEI,KAAK,CAACL,IAAI,CAAC,EAAEiB,cAAc,CAAC;IACxDxB,gBAAgB,CAAC,QAAQ,EAAEwB,cAAc,CAAC;IAC1C,OAAO,MAAM7B,YAAY,CAAC,KAAK,EAAE;MAC/B,KAAK,EAAEwB,IAAI;MACX,OAAO,EAAEd,GAAG;IACd,CAAC,EAAE,CAACY,QAAQ,CAACI,KAAK,GAAGT,KAAK,CAACJ,OAAO,GAAGQ,IAAI,CAACK,KAAK,EAAEH,SAAS,CAACG,KAAK,GAAGgD,YAAY,EAAE,GAAG,IAAI,CAAC,CAAC;EAC5F;AACF,CAAC,CAAC;AACF,SACE1D,aAAa,IAAI2D,OAAO,EACxBhE,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}