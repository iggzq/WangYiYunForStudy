{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-516dcd84\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"FooterMusic\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"横划可以切换上下首\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"footRight\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-bofang\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = [_hoisted_5];\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-zanting\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_8 = [_hoisted_7];\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"icon\",\n  \"aria-hidden\": \"true\"\n}, [/*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-a-24gf-playlistMusic2\"\n})], -1 /* HOISTED */));\nconst _hoisted_10 = [\"src\"];\nexport function render(_ctx, _cache) {\n  const _component_MusicDetail = _resolveComponent(\"MusicDetail\");\n  const _component_van_popup = _resolveComponent(\"van-popup\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"footLeft\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.changeDetailShow())\n  }, [_createElementVNode(\"img\", {\n    src: _ctx.playList[_ctx.playListIndex].al.picUrl,\n    alt: \"\"\n  }, null, 8 /* PROPS */, _hoisted_2), _createVNode(_component_van_popup, {\n    show: _ctx.detailShow,\n    \"onUpdate:show\": _cache[0] || (_cache[0] = $event => _ctx.detailShow = $event),\n    position: \"bottom\",\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_MusicDetail, {\n      musicList: _ctx.playList[_ctx.playListIndex],\n      play: _ctx.play,\n      isbtnShow: _ctx.isbtnShow,\n      changeDetailShow: _ctx.changeDetailShow,\n      detailShow: _ctx.detailShow\n    }, null, 8 /* PROPS */, [\"musicList\", \"play\", \"isbtnShow\", \"changeDetailShow\", \"detailShow\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"]), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", null, _toDisplayString(_ctx.playList[_ctx.playListIndex].name), 1 /* TEXT */), _hoisted_3])]), _createElementVNode(\"div\", _hoisted_4, [_ctx.isbtnShow ? (_openBlock(), _createElementBlock(\"svg\", {\n    key: 0,\n    class: \"icon\",\n    \"aria-hidden\": \"true\",\n    onClick: _cache[2] || (_cache[2] = $event => _ctx.play())\n  }, _hoisted_6)) : (_openBlock(), _createElementBlock(\"svg\", {\n    key: 1,\n    class: \"icon\",\n    \"aria-hidden\": \"true\",\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.play())\n  }, _hoisted_8)), _hoisted_9]), _createElementVNode(\"audio\", {\n    ref: \"audio\",\n    src: `https://music.163.com/song/media/outer/url?id=${_ctx.playList[_ctx.playListIndex].id}.mp3`\n  }, null, 8 /* PROPS */, _hoisted_10)]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_5","_hoisted_7","_createElementBlock","_hoisted_1","onClick","_cache","$event","_ctx","changeDetailShow","src","playList","playListIndex","al","picUrl","alt","_createVNode","_component_van_popup","show","detailShow","position","style","height","width","_component_MusicDetail","musicList","play","isbtnShow","_toDisplayString","name","_hoisted_3","_hoisted_4","_hoisted_9","ref","id"],"sources":["D:\\java项目\\网易云音乐\\wangyiyun-app\\src\\components\\item\\FooterMusic.vue"],"sourcesContent":["<template>\r\n  <div class=\"FooterMusic\">\r\n    <div class=\"footLeft\" @click=\"changeDetailShow()\">\r\n      <img :src=\"playList[playListIndex].al.picUrl\" alt=\"\" />\r\n      <van-popup\r\n        v-model:show=\"detailShow\"\r\n        position=\"bottom\"\r\n        :style=\"{ height: '100%', width: '100%' }\"\r\n      >\r\n        <MusicDetail\r\n          :musicList=\"playList[playListIndex]\"\r\n          :play=\"play\"\r\n          :isbtnShow=\"isbtnShow\"\r\n          :changeDetailShow=\"changeDetailShow\"\r\n          :detailShow=\"detailShow\"\r\n        />\r\n      </van-popup>\r\n      <div>\r\n        <p>{{ playList[playListIndex].name }}</p>\r\n        <span>横划可以切换上下首</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"footRight\">\r\n      <svg class=\"icon\" aria-hidden=\"true\" v-if=\"isbtnShow\" @click=\"play()\">\r\n        <use xlink:href=\"#icon-bofang\"></use>\r\n      </svg>\r\n      <svg class=\"icon\" aria-hidden=\"true\" v-else @click=\"play()\">\r\n        <use xlink:href=\"#icon-zanting\"></use>\r\n      </svg>\r\n      <svg class=\"icon\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-a-24gf-playlistMusic2\"></use>\r\n      </svg>\r\n    </div>\r\n    <audio\r\n      ref=\"audio\"\r\n      :src=\"`https://music.163.com/song/media/outer/url?id=${playList[playListIndex].id}.mp3`\"\r\n    ></audio>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState } from \"vuex\";\r\nimport MusicDetail from \"@/components/item/MusicDetail.vue\";\r\nimport { getMusicLyric } from \"@/request/api/Item\";\r\nexport default {\r\n  name: \"FooterMusic\",\r\n  computed: {\r\n    ...mapState([\"playList\", \"playListIndex\", \"isbtnShow\"]),\r\n  },\r\n  updated(){\r\n    this.$store.dispatch(\"getLyric\");\r\n  }\r\n  methods: {\r\n    play: function () {\r\n      //判断音乐是否播放\r\n      if (this.$refs.audio.paused) {\r\n        this.$refs.audio.play();\r\n        this.updateIsbtnShow(false);\r\n      } else {\r\n        this.$refs.audio.pause();\r\n        this.updateIsbtnShow(true);\r\n      }\r\n    },\r\n    changeDetailShow: function () {\r\n      console.log(1);\r\n      this.detailShow = !this.detailShow;\r\n    },\r\n    getLyric: async function () {\r\n      let res = await getMusicLyric(this.playList[this.playListIndex].al.id);\r\n      console.log(res);\r\n    },\r\n    ...mapMutations([\"updateIsbtnShow\"]),\r\n  },\r\n  watch: {\r\n    playListIndex: function () {\r\n      //监听如果下标发生了改变,就自动播放音乐\r\n      this.$refs.audio.autoplay = true;\r\n      if (this.$refs.audio.paused) {\r\n        this.updateIsbtnShow(false);\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      detailShow: false,\r\n    };\r\n  },\r\n  components: {\r\n    MusicDetail,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.FooterMusic {\r\n  width: 100%;\r\n  height: 1.4rem;\r\n  background-color: #fff;\r\n  position: fixed;\r\n  bottom: 0;\r\n  display: flex;\r\n  padding: 10px;\r\n  justify-content: space-between;\r\n  .footLeft {\r\n    width: 55%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    img {\r\n      width: 1rem;\r\n      height: 1rem;\r\n      border-radius: 50%;\r\n    }\r\n  }\r\n  .footRight {\r\n    width: 20%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .icon {\r\n      height: 30px;\r\n      width: 30px;\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAa;;gEAkBlBC,mBAAA,CAAsB,cAAhB,WAAS;;EAGdD,KAAK,EAAC;AAAW;gEAElBC,mBAAA,CAAqC;EAAhC,YAAU,EAAC;AAAc;oBAA9BC,UAAqC,C;gEAGrCD,mBAAA,CAAsC;EAAjC,YAAU,EAAC;AAAe;oBAA/BE,UAAsC,C;gEAExCF,mBAAA,CAEM;EAFDD,KAAK,EAAC,MAAM;EAAC,aAAW,EAAC;iBAC5BC,mBAAA,CAAoD;EAA/C,YAAU,EAAC;AAA6B,G;;;;;uBA7BnDG,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJJ,mBAAA,CAmBM;IAnBDD,KAAK,EAAC,UAAU;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,gBAAgB;MAC5CT,mBAAA,CAAuD;IAAjDU,GAAG,EAAEF,IAAA,CAAAG,QAAQ,CAACH,IAAA,CAAAI,aAAa,EAAEC,EAAE,CAACC,MAAM;IAAEC,GAAG,EAAC;uCAClDC,YAAA,CAYYC,oBAAA;IAXFC,IAAI,EAAEV,IAAA,CAAAW,UAAU;yDAAVX,IAAA,CAAAW,UAAU,GAAAZ,MAAA;IACxBa,QAAQ,EAAC,QAAQ;IAChBC,KAAK,EAAE;MAAAC,MAAA;MAAAC,KAAA;IAAA;;sBAER,MAME,CANFP,YAAA,CAMEQ,sBAAA;MALCC,SAAS,EAAEjB,IAAA,CAAAG,QAAQ,CAACH,IAAA,CAAAI,aAAa;MACjCc,IAAI,EAAElB,IAAA,CAAAkB,IAAI;MACVC,SAAS,EAAEnB,IAAA,CAAAmB,SAAS;MACpBlB,gBAAgB,EAAED,IAAA,CAAAC,gBAAgB;MAClCU,UAAU,EAAEX,IAAA,CAAAW;;;+BAGjBnB,mBAAA,CAGM,cAFJA,mBAAA,CAAyC,WAAA4B,gBAAA,CAAnCpB,IAAA,CAAAG,QAAQ,CAACH,IAAA,CAAAI,aAAa,EAAEiB,IAAI,kBAClCC,UAAsB,C,KAG1B9B,mBAAA,CAUM,OAVN+B,UAUM,GATuCvB,IAAA,CAAAmB,SAAS,I,cAApDxB,mBAAA,CAEM;;IAFDJ,KAAK,EAAC,MAAM;IAAC,aAAW,EAAC,MAAM;IAAmBM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAkB,IAAI;mCAGlEvB,mBAAA,CAEM;;IAFDJ,KAAK,EAAC,MAAM;IAAC,aAAW,EAAC,MAAM;IAASM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAkB,IAAI;mBAGxDM,UAEM,C,GAERhC,mBAAA,CAGS;IAFPiC,GAAG,EAAC,OAAO;IACVvB,GAAG,mDAAmDF,IAAA,CAAAG,QAAQ,CAACH,IAAA,CAAAI,aAAa,EAAEsB,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}