{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-516dcd84\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"FooterMusic\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"横划可以切换上下首\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"footRight\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-bofang\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = [_hoisted_5];\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-zanting\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_8 = [_hoisted_7];\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"icon\",\n  \"aria-hidden\": \"true\"\n}, [/*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-a-24gf-playlistMusic2\"\n})], -1 /* HOISTED */));\nconst _hoisted_10 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_MusicDetail = _resolveComponent(\"MusicDetail\");\n  const _component_van_popup = _resolveComponent(\"van-popup\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"footLeft\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.changeDetailShow())\n  }, [_createElementVNode(\"img\", {\n    src: _ctx.playList[_ctx.playListIndex].al.picUrl,\n    alt: \"\"\n  }, null, 8 /* PROPS */, _hoisted_2), _createVNode(_component_van_popup, {\n    show: $data.detailShow,\n    \"onUpdate:show\": _cache[2] || (_cache[2] = $event => $data.detailShow = $event),\n    position: \"bottom\",\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_MusicDetail, {\n      musicList: _ctx.playList[_ctx.playListIndex],\n      play: $options.play,\n      isbtnShow: _ctx.isbtnShow,\n      changeDetailShow: $options.changeDetailShow,\n      detailShow: $data.detailShow,\n      lyricList: $data.lyricList,\n      currentTime: $data.currentTime,\n      \"onUpdate:currentTime\": _cache[0] || (_cache[0] = $event => $data.currentTime = $event),\n      duration: this.$refs.audio.duration,\n      \"onUpdate:duration\": _cache[1] || (_cache[1] = $event => this.$refs.audio.duration = $event)\n    }, null, 8 /* PROPS */, [\"musicList\", \"play\", \"isbtnShow\", \"changeDetailShow\", \"detailShow\", \"lyricList\", \"currentTime\", \"duration\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"]), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", null, _toDisplayString(_ctx.playList[_ctx.playListIndex].name), 1 /* TEXT */), _hoisted_3])]), _createElementVNode(\"div\", _hoisted_4, [_ctx.isbtnShow ? (_openBlock(), _createElementBlock(\"svg\", {\n    key: 0,\n    class: \"icon\",\n    \"aria-hidden\": \"true\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.play())\n  }, _hoisted_6)) : (_openBlock(), _createElementBlock(\"svg\", {\n    key: 1,\n    class: \"icon\",\n    \"aria-hidden\": \"true\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.play())\n  }, _hoisted_8)), _hoisted_9]), _createElementVNode(\"audio\", {\n    ref: \"audio\",\n    src: `https://music.163.com/song/media/outer/url?id=${_ctx.playList[_ctx.playListIndex].id}.mp3`,\n    onTimeupdate: _cache[6] || (_cache[6] = $event => {\n      this.currentTime = this.$refs.audio.currentTime;\n    })\n  }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_10)]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_5","_hoisted_7","_createElementBlock","_hoisted_1","onClick","_cache","$event","$options","changeDetailShow","src","_ctx","playList","playListIndex","al","picUrl","alt","_createVNode","_component_van_popup","show","$data","detailShow","position","style","height","width","_component_MusicDetail","musicList","play","isbtnShow","lyricList","currentTime","duration","$refs","audio","_toDisplayString","name","_hoisted_3","_hoisted_4","_hoisted_9","ref","id","onTimeupdate"],"sources":["D:\\java项目\\网易云音乐\\wangyiyun-app\\src\\components\\item\\FooterMusic.vue"],"sourcesContent":["<template>\r\n  <div class=\"FooterMusic\">\r\n    <div class=\"footLeft\" @click=\"changeDetailShow()\">\r\n      <img :src=\"playList[playListIndex].al.picUrl\" alt=\"\" />\r\n      <van-popup\r\n        v-model:show=\"detailShow\"\r\n        position=\"bottom\"\r\n        :style=\"{ height: '100%', width: '100%' }\"\r\n      >\r\n        <MusicDetail\r\n          :musicList=\"playList[playListIndex]\"\r\n          :play=\"play\"\r\n          :isbtnShow=\"isbtnShow\"\r\n          :changeDetailShow=\"changeDetailShow\"\r\n          :detailShow=\"detailShow\"\r\n          :lyricList=\"lyricList\"\r\n          v-model:currentTime=\"currentTime\"\r\n          v-model:duration=\"this.$refs.audio.duration\"\r\n\r\n        />\r\n      </van-popup>\r\n      <div>\r\n        <p>{{ playList[playListIndex].name }}</p>\r\n        <span>横划可以切换上下首</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"footRight\">\r\n      <svg class=\"icon\" aria-hidden=\"true\" v-if=\"isbtnShow\" @click=\"play()\">\r\n        <use xlink:href=\"#icon-bofang\"></use>\r\n      </svg>\r\n      <svg class=\"icon\" aria-hidden=\"true\" v-else @click=\"play()\">\r\n        <use xlink:href=\"#icon-zanting\"></use>\r\n      </svg>\r\n      <svg class=\"icon\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-a-24gf-playlistMusic2\"></use>\r\n      </svg>\r\n    </div>\r\n    <audio\r\n      ref=\"audio\"\r\n      :src=\"`https://music.163.com/song/media/outer/url?id=${playList[playListIndex].id}.mp3`\"\r\n      @timeupdate=\"this.currentTime = this.$refs.audio.currentTime;\"\r\n    ></audio>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState } from \"vuex\";\r\nimport MusicDetail from \"@/components/item/MusicDetail.vue\";\r\nimport { getMusicLyric } from \"@/request/api/Item\";\r\nexport default {\r\n  name: \"FooterMusic\",\r\n  computed: {\r\n    ...mapState([\"playList\", \"playListIndex\", \"isbtnShow\"]),\r\n  },\r\n  updated(){\r\n    this.getLyric();\r\n  },\r\n  methods: {\r\n    play: function () {\r\n      //判断音乐是否播放\r\n      if (this.$refs.audio.paused) {\r\n        this.$refs.audio.play();\r\n        this.updateIsbtnShow(false);\r\n      } else {\r\n        this.$refs.audio.pause();\r\n        this.updateIsbtnShow(true);\r\n      }\r\n    },\r\n    updateCurrentTime: function(){\r\n      this.currentTime = this.$refs.audio.currentTime;\r\n      console.log(this.currentTime);\r\n    },\r\n    // updateTime:function(){\r\n    //   setInterval(() => {\r\n    //     this.updateCurrentTime();\r\n    //   }, 1000);\r\n    // },\r\n    changeDetailShow: function () {\r\n      console.log(1);\r\n      // this.getLyric();\r\n      this.detailShow = !this.detailShow;\r\n    },\r\n    getLyric: async function () {\r\n      let res = await getMusicLyric(this.playList[this.playListIndex].id);\r\n      this.lyricList = res.data;\r\n      console.log(this.lyricList);\r\n    },\r\n    ...mapMutations([\"updateIsbtnShow\"]),\r\n  },\r\n  watch: {\r\n    playListIndex: function () {\r\n      //监听如果下标发生了改变,就自动播放音乐\r\n      this.$refs.audio.autoplay = true;\r\n      if (this.$refs.audio.paused) {\r\n        this.updateIsbtnShow(false);\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      detailShow: false,\r\n      lyricList: [],\r\n      currentTime: 0,\r\n      interVal: 0,\r\n    };\r\n  },\r\n  components: {\r\n    MusicDetail,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.FooterMusic {\r\n  width: 100%;\r\n  height: 1.4rem;\r\n  background-color: #fff;\r\n  position: fixed;\r\n  bottom: 0;\r\n  display: flex;\r\n  padding: 10px;\r\n  justify-content: space-between;\r\n  .footLeft {\r\n    width: 55%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    img {\r\n      width: 1rem;\r\n      height: 1rem;\r\n      border-radius: 50%;\r\n    }\r\n  }\r\n  .footRight {\r\n    width: 20%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .icon {\r\n      height: 30px;\r\n      width: 30px;\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAa;;gEAsBlBC,mBAAA,CAAsB,cAAhB,WAAS;;EAGdD,KAAK,EAAC;AAAW;gEAElBC,mBAAA,CAAqC;EAAhC,YAAU,EAAC;AAAc;oBAA9BC,UAAqC,C;gEAGrCD,mBAAA,CAAsC;EAAjC,YAAU,EAAC;AAAe;oBAA/BE,UAAsC,C;gEAExCF,mBAAA,CAEM;EAFDD,KAAK,EAAC,MAAM;EAAC,aAAW,EAAC;iBAC5BC,mBAAA,CAAoD;EAA/C,YAAU,EAAC;AAA6B,G;;;;;uBAjCnDG,mBAAA,CAyCM,OAzCNC,UAyCM,GAxCJJ,mBAAA,CAuBM;IAvBDD,KAAK,EAAC,UAAU;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,gBAAgB;MAC5CT,mBAAA,CAAuD;IAAjDU,GAAG,EAAEC,IAAA,CAAAC,QAAQ,CAACD,IAAA,CAAAE,aAAa,EAAEC,EAAE,CAACC,MAAM;IAAEC,GAAG,EAAC;uCAClDC,YAAA,CAgBYC,oBAAA;IAfFC,IAAI,EAAEC,KAAA,CAAAC,UAAU;yDAAVD,KAAA,CAAAC,UAAU,GAAAd,MAAA;IACxBe,QAAQ,EAAC,QAAQ;IAChBC,KAAK,EAAE;MAAAC,MAAA;MAAAC,KAAA;IAAA;;sBAER,MAUE,CAVFR,YAAA,CAUES,sBAAA;MATCC,SAAS,EAAEhB,IAAA,CAAAC,QAAQ,CAACD,IAAA,CAAAE,aAAa;MACjCe,IAAI,EAAEpB,QAAA,CAAAoB,IAAI;MACVC,SAAS,EAAElB,IAAA,CAAAkB,SAAS;MACpBpB,gBAAgB,EAAED,QAAA,CAAAC,gBAAgB;MAClCY,UAAU,EAAED,KAAA,CAAAC,UAAU;MACtBS,SAAS,EAAEV,KAAA,CAAAU,SAAS;MACbC,WAAW,EAAEX,KAAA,CAAAW,WAAW;kEAAXX,KAAA,CAAAW,WAAW,GAAAxB,MAAA;MACxByB,QAAQ,OAAOC,KAAK,CAACC,KAAK,CAACF,QAAQ;oEAApBC,KAAK,CAACC,KAAK,CAACF,QAAQ,GAAAzB,MAAA;;;+BAI/CP,mBAAA,CAGM,cAFJA,mBAAA,CAAyC,WAAAmC,gBAAA,CAAnCxB,IAAA,CAAAC,QAAQ,CAACD,IAAA,CAAAE,aAAa,EAAEuB,IAAI,kBAClCC,UAAsB,C,KAG1BrC,mBAAA,CAUM,OAVNsC,UAUM,GATuC3B,IAAA,CAAAkB,SAAS,I,cAApD1B,mBAAA,CAEM;;IAFDJ,KAAK,EAAC,MAAM;IAAC,aAAW,EAAC,MAAM;IAAmBM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAoB,IAAI;mCAGlEzB,mBAAA,CAEM;;IAFDJ,KAAK,EAAC,MAAM;IAAC,aAAW,EAAC,MAAM;IAASM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAoB,IAAI;mBAGxDW,UAEM,C,GAERvC,mBAAA,CAIS;IAHPwC,GAAG,EAAC,OAAO;IACV9B,GAAG,mDAAmDC,IAAA,CAAAC,QAAQ,CAACD,IAAA,CAAAE,aAAa,EAAE4B,EAAE;IAChFC,YAAU,EAAApC,MAAA,QAAAA,MAAA,MAAAC,MAAA;MAAA,KAAOwB,WAAW,QAAQE,KAAK,CAACC,KAAK,CAACH,WAAW;IAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}